import{aA as v,R as W,aL as L,aM as P,ab as _,aN as A,E as B,aO as R,av as C,aP as D,aQ as I,aR as z,I as V,aD as $}from"./Bhz2gfrB.js";function Q(e={}){const{inheritAttrs:s=!0}=e,u=v(),f=W({setup(a,{slots:i}){return()=>{u.value=i.default}}}),c=W({inheritAttrs:s,props:e.props,setup(a,{attrs:i,slots:o}){return()=>{var t;u.value;const n=(t=u.value)==null?void 0:t.call(u,{...e.props==null?j(i):a,$slots:o});return s&&(n==null?void 0:n.length)===1?n[0]:n}}});return L({define:f,reuse:c},[f,c])}function j(e){const s={};for(const u in e)s[P(u)]=e[u];return s}const T=A?window:void 0;function S(e){var s;const u=C(e);return(s=u==null?void 0:u.$el)!=null?s:u}function b(...e){const s=[],u=()=>{s.forEach(o=>o()),s.length=0},f=(o,t,n,r)=>(o.addEventListener(t,n,r),()=>o.removeEventListener(t,n,r)),c=B(()=>{const o=R(C(e[0])).filter(t=>t!=null);return o.every(t=>typeof t!="string")?o:void 0}),a=D(()=>{var o,t;return[(t=(o=c.value)==null?void 0:o.map(n=>S(n)))!=null?t:[T].filter(n=>n!=null),R(C(c.value?e[1]:e[0])),R(V(c.value?e[2]:e[1])),C(c.value?e[3]:e[2])]},([o,t,n,r])=>{if(u(),!(o!=null&&o.length)||!(t!=null&&t.length)||!(n!=null&&n.length))return;const m=z(r)?{...r}:r;s.push(...o.flatMap(p=>t.flatMap(d=>n.map(h=>f(p,d,h,m)))))},{flush:"post"}),i=()=>{a(),u()};return I(u),i}const O=new Map;function U(e){const s=$();function u(o){var t;const n=O.get(e)||new Set;n.add(o),O.set(e,n);const r=()=>c(o);return(t=s==null?void 0:s.cleanups)==null||t.push(r),r}function f(o){function t(...n){c(t),o(...n)}return u(t)}function c(o){const t=O.get(e);t&&(t.delete(o),t.size||a())}function a(){O.delete(e)}function i(o,t){var n;(n=O.get(e))==null||n.forEach(r=>r(o,t))}return{on:u,once:f,off:c,emit:i,reset:a}}const F={page:e=>[e.pageX,e.pageY],client:e=>[e.clientX,e.clientY],screen:e=>[e.screenX,e.screenY],movement:e=>e instanceof MouseEvent?[e.movementX,e.movementY]:null};function K(e={}){const{type:s="page",touch:u=!0,resetOnTouchEnds:f=!1,initialValue:c={x:0,y:0},window:a=T,target:i=a,scroll:o=!0,eventFilter:t}=e;let n=null,r=0,m=0;const p=v(c.x),d=v(c.y),h=v(null),g=typeof s=="function"?s:F[s],y=l=>{const M=g(l);n=l,M&&([p.value,d.value]=M,h.value="mouse"),a&&(r=a.scrollX,m=a.scrollY)},E=l=>{if(l.touches.length>0){const M=g(l.touches[0]);M&&([p.value,d.value]=M,h.value="touch")}},x=()=>{if(!n||!a)return;const l=g(n);n instanceof MouseEvent&&l&&(p.value=l[0]+a.scrollX-r,d.value=l[1]+a.scrollY-m)},H=()=>{p.value=c.x,d.value=c.y},X=t?l=>t(()=>y(l),{}):l=>y(l),Y=t?l=>t(()=>E(l),{}):l=>E(l),w=t?()=>t(()=>x(),{}):()=>x();if(i){const l={passive:!0};b(i,["mousemove","dragover"],X,l),u&&s!=="movement"&&(b(i,["touchstart","touchmove"],Y,l),f&&b(i,"touchend",H,l)),o&&s==="page"&&b(a,"scroll",w,l)}return{x:p,y:d,sourceType:h}}function q(e,s={}){const{handleOutside:u=!0,window:f=T}=s,c=s.type||"page",{x:a,y:i,sourceType:o}=K(s),t=v(e??(f==null?void 0:f.document.body)),n=v(0),r=v(0),m=v(0),p=v(0),d=v(0),h=v(0),g=v(!0);let y=()=>{};return f&&(y=_([t,a,i],()=>{const E=S(t);if(!E||!(E instanceof Element))return;const{left:x,top:H,width:X,height:Y}=E.getBoundingClientRect();m.value=x+(c==="page"?f.pageXOffset:0),p.value=H+(c==="page"?f.pageYOffset:0),d.value=Y,h.value=X;const w=a.value-m.value,l=i.value-p.value;g.value=X===0||Y===0||w<0||l<0||w>X||l>Y,(u||!g.value)&&(n.value=w,r.value=l)},{immediate:!0}),b(document,"mouseleave",()=>g.value=!0,{passive:!0})),{x:a,y:i,sourceType:o,elementX:n,elementY:r,elementPositionX:m,elementPositionY:p,elementHeight:d,elementWidth:h,isOutside:g,stop:y}}export{q as a,Q as c,U as u};
