import{aE as B,aF as H,aG as G,r as b,a3 as V,C as q,aH as I,L as R,z as W,aI as P,o as U,av as $,x as J}from"./fntxPvSH.js";function M(e){return H()?(G(e),!0):!1}function ae(e){let t=0,n,r;const i=()=>{t-=1,r&&t<=0&&(r.stop(),n=void 0,r=void 0)};return(...o)=>(t+=1,r||(r=B(!0),n=r.run(()=>e(...o))),M(i),n)}function S(e){return typeof e=="function"?e():q(e)}const F=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const K=e=>e!=null,Q=Object.prototype.toString,Z=e=>Q.call(e)==="[object Object]",O=()=>{};function X(e,t){function n(...r){return new Promise((i,o)=>{Promise.resolve(e(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})).then(i).catch(o)})}return n}const k=e=>e();function ee(e,t={}){let n,r,i=O;const o=a=>{clearTimeout(a),i(),i=O};return a=>{const u=S(e),l=S(t.maxWait);return n&&o(n),u<=0||l!==void 0&&l<=0?(r&&(o(r),r=null),Promise.resolve(a())):new Promise((s,f)=>{i=t.rejectOnCancel?f:s,l&&!r&&(r=setTimeout(()=>{n&&o(n),r=null,s(a())},l)),n=setTimeout(()=>{r&&o(r),r=null,s(a())},u)})}}function te(...e){let t=0,n,r=!0,i=O,o,c,a,u,l;!I(e[0])&&typeof e[0]=="object"?{delay:c,trailing:a=!0,leading:u=!0,rejectOnCancel:l=!1}=e[0]:[c,a=!0,u=!0,l=!1]=e;const s=()=>{n&&(clearTimeout(n),n=void 0,i(),i=O)};return d=>{const p=S(c),w=Date.now()-t,g=()=>o=d();return s(),p<=0?(t=Date.now(),g()):(w>p&&(u||!r)?(t=Date.now(),g()):a&&(o=new Promise((E,T)=>{i=l?T:E,n=setTimeout(()=>{t=Date.now(),r=!0,E(g()),s()},Math.max(0,p-w))})),!u&&!n&&(n=setTimeout(()=>r=!0,p)),r=!1,o)}}function ne(e){let t;function n(){return t||(t=e()),t}return n.reset=async()=>{const r=t;t=void 0,r&&await r},n}function ce(e,t=200,n={}){return X(ee(t,n),e)}function oe(e,t,n={}){const{eventFilter:r=k,...i}=n;return R(e,X(r,t),i)}function re(e,t,n={}){const{immediate:r=!0}=n,i=b(!1);let o=null;function c(){o&&(clearTimeout(o),o=null)}function a(){i.value=!1,c()}function u(...l){c(),i.value=!0,o=setTimeout(()=>{i.value=!1,o=null,e(...l)},S(t))}return r&&(i.value=!0,F&&u()),M(a),{isPending:V(i),start:u,stop:a}}function fe(e,t,n={}){const{throttle:r=0,trailing:i=!0,leading:o=!0,...c}=n;return oe(e,t,{...c,eventFilter:te(r,i,o)})}const C=F?window:void 0,Y=F?window.navigator:void 0;function L(e){var t;const n=S(e);return(t=n==null?void 0:n.$el)!=null?t:n}function y(...e){let t,n,r,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,r,i]=e,t=C):[t,n,r,i]=e,!t)return O;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const o=[],c=()=>{o.forEach(s=>s()),o.length=0},a=(s,f,d,p)=>(s.addEventListener(f,d,p),()=>s.removeEventListener(f,d,p)),u=R(()=>[L(t),S(i)],([s,f])=>{if(c(),!s)return;const d=Z(f)?{...f}:f;o.push(...n.flatMap(p=>r.map(w=>a(s,p,w,d))))},{immediate:!0,flush:"post"}),l=()=>{u(),c()};return M(l),l}function se(){const e=b(!1),t=$();return t&&U(()=>{e.value=!0},t),e}function j(e){const t=se();return W(()=>(t.value,!!e()))}function ie(e,t,n={}){const{window:r=C,...i}=n;let o;const c=j(()=>r&&"MutationObserver"in r),a=()=>{o&&(o.disconnect(),o=void 0)},u=W(()=>{const d=S(e),p=(Array.isArray(d)?d:[d]).map(L).filter(K);return new Set(p)}),l=R(()=>u.value,d=>{a(),c.value&&d.size&&(o=new MutationObserver(t),d.forEach(p=>o.observe(p,i)))},{immediate:!0,flush:"post"}),s=()=>o==null?void 0:o.takeRecords(),f=()=>{l(),a()};return M(f),{isSupported:c,stop:f,takeRecords:s}}function de(e={}){var t;const{window:n=C,deep:r=!0,triggerOnRemoval:i=!1}=e,o=(t=e.document)!=null?t:n==null?void 0:n.document,c=()=>{var l;let s=o==null?void 0:o.activeElement;if(r)for(;s!=null&&s.shadowRoot;)s=(l=s==null?void 0:s.shadowRoot)==null?void 0:l.activeElement;return s},a=b(),u=()=>{a.value=c()};return n&&(y(n,"blur",l=>{l.relatedTarget===null&&u()},!0),y(n,"focus",u,!0)),i&&ie(o,l=>{l.filter(s=>s.removedNodes.length).map(s=>Array.from(s.removedNodes)).flat().forEach(s=>{s===a.value&&u()})},{childList:!0,subtree:!0}),u(),a}function D(e,t={}){const{controls:n=!1,navigator:r=Y}=t,i=j(()=>r&&"permissions"in r),o=P(),c=typeof e=="string"?{name:e}:e,a=P(),u=()=>{var s,f;a.value=(f=(s=o.value)==null?void 0:s.state)!=null?f:"prompt"};y(o,"change",u);const l=ne(async()=>{if(i.value){if(!o.value)try{o.value=await r.permissions.query(c)}catch{o.value=void 0}finally{u()}if(n)return J(o.value)}});return l(),n?{state:a,isSupported:i,query:l}:a}function pe(e={}){const{navigator:t=Y,read:n=!1,source:r,copiedDuring:i=1500,legacy:o=!1}=e,c=j(()=>t&&"clipboard"in t),a=D("clipboard-read"),u=D("clipboard-write"),l=W(()=>c.value||o),s=b(""),f=b(!1),d=re(()=>f.value=!1,i);function p(){c.value&&T(a.value)?t.clipboard.readText().then(m=>{s.value=m}):s.value=E()}l.value&&n&&y(["copy","cut"],p);async function w(m=S(r)){l.value&&m!=null&&(c.value&&T(u.value)?await t.clipboard.writeText(m):g(m),s.value=m,f.value=!0,d.start())}function g(m){const h=document.createElement("textarea");h.value=m??"",h.style.position="absolute",h.style.opacity="0",document.body.appendChild(h),h.select(),document.execCommand("copy"),h.remove()}function E(){var m,h,A;return(A=(h=(m=document==null?void 0:document.getSelection)==null?void 0:m.call(document))==null?void 0:h.toString())!=null?A:""}function T(m){return m==="granted"||m==="prompt"}return{isSupported:l,text:s,copied:f,copy:w}}const _=new Map;function ve(e){const t=H();function n(a){var u;const l=_.get(e)||new Set;l.add(a),_.set(e,l);const s=()=>i(a);return(u=t==null?void 0:t.cleanups)==null||u.push(s),s}function r(a){function u(...l){i(u),a(...l)}return n(u)}function i(a){const u=_.get(e);u&&(u.delete(a),u.size||o())}function o(){_.delete(e)}function c(a,u){var l;(l=_.get(e))==null||l.forEach(s=>s(a,u))}return{on:n,once:r,off:i,emit:c,reset:o}}const ue={page:e=>[e.pageX,e.pageY],client:e=>[e.clientX,e.clientY],screen:e=>[e.screenX,e.screenY],movement:e=>e instanceof Touch?null:[e.movementX,e.movementY]};function me(e={}){const{type:t="page",touch:n=!0,resetOnTouchEnds:r=!1,initialValue:i={x:0,y:0},window:o=C,target:c=o,scroll:a=!0,eventFilter:u}=e;let l=null,s=0,f=0;const d=b(i.x),p=b(i.y),w=b(null),g=typeof t=="function"?t:ue[t],E=v=>{const x=g(v);l=v,x&&([d.value,p.value]=x,w.value="mouse"),o&&(s=o.scrollX,f=o.scrollY)},T=v=>{if(v.touches.length>0){const x=g(v.touches[0]);x&&([d.value,p.value]=x,w.value="touch")}},m=()=>{if(!l||!o)return;const v=g(l);l instanceof MouseEvent&&v&&(d.value=v[0]+o.scrollX-s,p.value=v[1]+o.scrollY-f)},h=()=>{d.value=i.x,p.value=i.y},A=u?v=>u(()=>E(v),{}):v=>E(v),N=u?v=>u(()=>T(v),{}):v=>T(v),z=u?()=>u(()=>m(),{}):()=>m();if(c){const v={passive:!0};y(c,["mousemove","dragover"],A,v),n&&t!=="movement"&&(y(c,["touchstart","touchmove"],N,v),r&&y(c,"touchend",h,v)),a&&t==="page"&&y(o,"scroll",z,{passive:!0})}return{x:d,y:p,sourceType:w}}export{L as a,ce as b,ae as c,C as d,ve as e,de as f,pe as g,me as u,fe as w};
