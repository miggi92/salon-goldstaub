import{ax as D,ay as x,az as F,r as g,aA as L,$ as q,J as P,X as z,o as B,at as G}from"./CTWSYZ5m.js";function E(e){return x()?(F(e),!0):!1}function U(e){let t=0,n,o;const s=()=>{t-=1,o&&t<=0&&(o.stop(),n=void 0,o=void 0)};return(...r)=>(t+=1,n||(o=D(!0),n=o.run(()=>e(...r))),E(s),n)}function y(e){return typeof e=="function"?e():q(e)}const T=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const $=Object.prototype.toString,I=e=>$.call(e)==="[object Object]",S=()=>{};function J(e,t){function n(...o){return new Promise((s,r)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(s).catch(r)})}return n}function N(e,t={}){let n,o,s=S;const r=u=>{clearTimeout(u),s(),s=S};return u=>{const a=y(e),i=y(t.maxWait);return n&&r(n),a<=0||i!==void 0&&i<=0?(o&&(r(o),o=null),Promise.resolve(u())):new Promise((c,d)=>{s=t.rejectOnCancel?d:c,i&&!o&&(o=setTimeout(()=>{n&&r(n),o=null,c(u())},i)),n=setTimeout(()=>{o&&r(o),o=null,c(u())},a)})}}function V(e){let t;function n(){return t||(t=e()),t}return n.reset=async()=>{const o=t;t=void 0,o&&await o},n}function Y(e,t=200,n={}){return J(N(t,n),e)}function X(e,t,n={}){const{immediate:o=!0}=n,s=g(!1);let r=null;function l(){r&&(clearTimeout(r),r=null)}function u(){s.value=!1,l()}function a(...i){l(),s.value=!0,r=setTimeout(()=>{s.value=!1,r=null,e(...i)},y(t))}return o&&(s.value=!0,T&&a()),E(u),{isPending:L(s),start:a,stop:u}}function H(e){var t;const n=y(e);return(t=n==null?void 0:n.$el)!=null?t:n}const W=T?window:void 0,j=T?window.navigator:void 0;function b(...e){let t,n,o,s;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,s]=e,t=W):[t,n,o,s]=e,!t)return S;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const r=[],l=()=>{r.forEach(c=>c()),r.length=0},u=(c,d,m,v)=>(c.addEventListener(d,m,v),()=>c.removeEventListener(d,m,v)),a=z(()=>[H(t),y(s)],([c,d])=>{if(l(),!c)return;const m=I(d)?{...d}:d;r.push(...n.flatMap(v=>o.map(h=>u(c,v,h,m))))},{immediate:!0,flush:"post"}),i=()=>{a(),l()};return E(i),i}function Z(e={}){var t;const{window:n=W,deep:o=!0}=e,s=(t=e.document)!=null?t:n==null?void 0:n.document,r=()=>{var a;let i=s==null?void 0:s.activeElement;if(o)for(;i!=null&&i.shadowRoot;)i=(a=i==null?void 0:i.shadowRoot)==null?void 0:a.activeElement;return i},l=g(),u=()=>{l.value=r()};return n&&(b(n,"blur",a=>{a.relatedTarget===null&&u()},!0),b(n,"focus",u,!0)),u(),l}function K(){const e=g(!1),t=G();return t&&B(()=>{e.value=!0},t),e}function M(e){const t=K();return P(()=>(t.value,!!e()))}function C(e,t={}){const{controls:n=!1,navigator:o=j}=t,s=M(()=>o&&"permissions"in o);let r;const l=typeof e=="string"?{name:e}:e,u=g(),a=()=>{r&&(u.value=r.state)},i=V(async()=>{if(s.value){if(!r)try{r=await o.permissions.query(l),b(r,"change",a),a()}catch{u.value="prompt"}return r}});return i(),n?{state:u,isSupported:s,query:i}:u}function k(e={}){const{navigator:t=j,read:n=!1,source:o,copiedDuring:s=1500,legacy:r=!1}=e,l=M(()=>t&&"clipboard"in t),u=C("clipboard-read"),a=C("clipboard-write"),i=P(()=>l.value||r),c=g(""),d=g(!1),m=X(()=>d.value=!1,s);function v(){l.value&&_(u.value)?t.clipboard.readText().then(f=>{c.value=f}):c.value=R()}i.value&&n&&b(["copy","cut"],v);async function h(f=y(o)){i.value&&f!=null&&(l.value&&_(a.value)?await t.clipboard.writeText(f):O(f),c.value=f,d.value=!0,m.start())}function O(f){const p=document.createElement("textarea");p.value=f??"",p.style.position="absolute",p.style.opacity="0",document.body.appendChild(p),p.select(),document.execCommand("copy"),p.remove()}function R(){var f,p,A;return(A=(p=(f=document==null?void 0:document.getSelection)==null?void 0:f.call(document))==null?void 0:p.toString())!=null?A:""}function _(f){return f==="granted"||f==="prompt"}return{isSupported:i,text:c,copied:d,copy:h}}const w=new Map;function ee(e){const t=x();function n(u){var a;const i=w.get(e)||new Set;i.add(u),w.set(e,i);const c=()=>s(u);return(a=t==null?void 0:t.cleanups)==null||a.push(c),c}function o(u){function a(...i){s(a),u(...i)}return n(a)}function s(u){const a=w.get(e);a&&(a.delete(u),a.size||r())}function r(){w.delete(e)}function l(u,a){var i;(i=w.get(e))==null||i.forEach(c=>c(u,a))}return{on:n,once:o,off:s,emit:l,reset:r}}export{ee as a,Z as b,U as c,k as d,H as e,Y as u};
