import{aw as D,ax as x,ay as F,r as g,az as L,$ as q,X as A,aA as z,J as P,as as B,o as G}from"./entry.srXJYJAt.js";function $(e,t){let n,o,s;const r=g(!0),l=()=>{r.value=!0,s()};A(e,l,{flush:"sync"});const u=typeof t=="function"?t:t.get,i=typeof t=="function"?void 0:t.set,a=z((c,f)=>(o=c,s=f,{get(){return r.value&&(n=u(),r.value=!1),o(),n},set(v){i==null||i(v)}}));return Object.isExtensible(a)&&(a.trigger=l),a}function E(e){return x()?(F(e),!0):!1}function Y(e){let t=0,n,o;const s=()=>{t-=1,o&&t<=0&&(o.stop(),n=void 0,o=void 0)};return(...r)=>(t+=1,n||(o=D(!0),n=o.run(()=>e(...r))),E(s),n)}function y(e){return typeof e=="function"?e():q(e)}const C=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const I=Object.prototype.toString,J=e=>I.call(e)==="[object Object]",S=()=>{};function N(e,t){function n(...o){return new Promise((s,r)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(s).catch(r)})}return n}function V(e,t={}){let n,o,s=S;const r=u=>{clearTimeout(u),s(),s=S};return u=>{const i=y(e),a=y(t.maxWait);return n&&r(n),i<=0||a!==void 0&&a<=0?(o&&(r(o),o=null),Promise.resolve(u())):new Promise((c,f)=>{s=t.rejectOnCancel?f:c,a&&!o&&(o=setTimeout(()=>{n&&r(n),o=null,c(u())},a)),n=setTimeout(()=>{o&&r(o),o=null,c(u())},i)})}}function X(e){let t;function n(){return t||(t=e()),t}return n.reset=async()=>{const o=t;t=void 0,o&&await o},n}function Z(e,t=200,n={}){return N(V(t,n),e)}function H(e,t,n={}){const{immediate:o=!0}=n,s=g(!1);let r=null;function l(){r&&(clearTimeout(r),r=null)}function u(){s.value=!1,l()}function i(...a){l(),s.value=!0,r=setTimeout(()=>{s.value=!1,r=null,e(...a)},y(t))}return o&&(s.value=!0,C&&i()),E(u),{isPending:L(s),start:i,stop:u}}function K(e){var t;const n=y(e);return(t=n==null?void 0:n.$el)!=null?t:n}const W=C?window:void 0,j=C?window.navigator:void 0;function b(...e){let t,n,o,s;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,s]=e,t=W):[t,n,o,s]=e,!t)return S;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const r=[],l=()=>{r.forEach(c=>c()),r.length=0},u=(c,f,v,m)=>(c.addEventListener(f,v,m),()=>c.removeEventListener(f,v,m)),i=A(()=>[K(t),y(s)],([c,f])=>{if(l(),!c)return;const v=J(f)?{...f}:f;r.push(...n.flatMap(m=>o.map(h=>u(c,m,h,v))))},{immediate:!0,flush:"post"}),a=()=>{i(),l()};return E(a),a}function k(e={}){var t;const{window:n=W,deep:o=!0}=e,s=(t=e.document)!=null?t:n==null?void 0:n.document,r=()=>{var u;let i=s==null?void 0:s.activeElement;if(o)for(;i!=null&&i.shadowRoot;)i=(u=i==null?void 0:i.shadowRoot)==null?void 0:u.activeElement;return i},l=$(()=>null,()=>r());return n&&(b(n,"blur",u=>{u.relatedTarget===null&&l.trigger()},!0),b(n,"focus",l.trigger,!0)),l}function Q(){const e=g(!1);return B()&&G(()=>{e.value=!0}),e}function M(e){const t=Q();return P(()=>(t.value,!!e()))}function _(e,t={}){const{controls:n=!1,navigator:o=j}=t,s=M(()=>o&&"permissions"in o);let r;const l=typeof e=="string"?{name:e}:e,u=g(),i=()=>{r&&(u.value=r.state)},a=X(async()=>{if(s.value){if(!r)try{r=await o.permissions.query(l),b(r,"change",i),i()}catch{u.value="prompt"}return r}});return a(),n?{state:u,isSupported:s,query:a}:u}function ee(e={}){const{navigator:t=j,read:n=!1,source:o,copiedDuring:s=1500,legacy:r=!1}=e,l=M(()=>t&&"clipboard"in t),u=_("clipboard-read"),i=_("clipboard-write"),a=P(()=>l.value||r),c=g(""),f=g(!1),v=H(()=>f.value=!1,s);function m(){l.value&&u.value!=="denied"?t.clipboard.readText().then(d=>{c.value=d}):c.value=R()}a.value&&n&&b(["copy","cut"],m);async function h(d=y(o)){a.value&&d!=null&&(l.value&&i.value!=="denied"?await t.clipboard.writeText(d):O(d),c.value=d,f.value=!0,v.start())}function O(d){const p=document.createElement("textarea");p.value=d??"",p.style.position="absolute",p.style.opacity="0",document.body.appendChild(p),p.select(),document.execCommand("copy"),p.remove()}function R(){var d,p,T;return(T=(p=(d=document==null?void 0:document.getSelection)==null?void 0:d.call(document))==null?void 0:p.toString())!=null?T:""}return{isSupported:a,text:c,copied:f,copy:h}}const w=new Map;function te(e){const t=x();function n(u){var i;const a=w.get(e)||new Set;a.add(u),w.set(e,a);const c=()=>s(u);return(i=t==null?void 0:t.cleanups)==null||i.push(c),c}function o(u){function i(...a){s(i),u(...a)}return n(i)}function s(u){const i=w.get(e);i&&(i.delete(u),i.size||r())}function r(){w.delete(e)}function l(u,i){var a;(a=w.get(e))==null||a.forEach(c=>c(u,i))}return{on:n,once:o,off:s,emit:l,reset:r}}export{te as a,k as b,Y as c,ee as d,K as e,Z as u};
