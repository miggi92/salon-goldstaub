import{aB as B,aC as H,aD as N,r as b,a2 as z,C as V,aE as q,a0 as R,z as W,aF as D,o as G,as as I,x as U}from"./CRalHeHz.js";function C(e){return H()?(N(e),!0):!1}function ue(e){let t=0,n,o;const i=()=>{t-=1,o&&t<=0&&(o.stop(),n=void 0,o=void 0)};return(...r)=>(t+=1,o||(o=B(!0),n=o.run(()=>e(...r))),C(i),n)}function E(e){return typeof e=="function"?e():V(e)}const F=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const $=e=>e!=null,J=Object.prototype.toString,K=e=>J.call(e)==="[object Object]",O=()=>{};function L(e,t){function n(...o){return new Promise((i,r)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(i).catch(r)})}return n}const Q=e=>e();function Z(e,t={}){let n,o,i=O;const r=a=>{clearTimeout(a),i(),i=O};return a=>{const u=E(e),l=E(t.maxWait);return n&&r(n),u<=0||l!==void 0&&l<=0?(o&&(r(o),o=null),Promise.resolve(a())):new Promise((s,f)=>{i=t.rejectOnCancel?f:s,l&&!o&&(o=setTimeout(()=>{n&&r(n),o=null,s(a())},l)),n=setTimeout(()=>{o&&r(o),o=null,s(a())},u)})}}function k(...e){let t=0,n,o=!0,i=O,r,c,a,u,l;!q(e[0])&&typeof e[0]=="object"?{delay:c,trailing:a=!0,leading:u=!0,rejectOnCancel:l=!1}=e[0]:[c,a=!0,u=!0,l=!1]=e;const s=()=>{n&&(clearTimeout(n),n=void 0,i(),i=O)};return p=>{const v=E(c),w=Date.now()-t,g=()=>r=p();return s(),v<=0?(t=Date.now(),g()):(w>v&&(u||!o)?(t=Date.now(),g()):a&&(r=new Promise((S,T)=>{i=l?T:S,n=setTimeout(()=>{t=Date.now(),o=!0,S(g()),s()},Math.max(0,v-w))})),!u&&!n&&(n=setTimeout(()=>o=!0,v)),o=!1,r)}}function ee(e){let t;function n(){return t||(t=e()),t}return n.reset=async()=>{const o=t;t=void 0,o&&await o},n}function le(e,t=200,n={}){return L(Z(t,n),e)}function te(e,t,n={}){const{eventFilter:o=Q,...i}=n;return R(e,L(o,t),i)}function ne(e,t,n={}){const{immediate:o=!0}=n,i=b(!1);let r=null;function c(){r&&(clearTimeout(r),r=null)}function a(){i.value=!1,c()}function u(...l){c(),i.value=!0,r=setTimeout(()=>{i.value=!1,r=null,e(...l)},E(t))}return o&&(i.value=!0,F&&u()),C(a),{isPending:z(i),start:u,stop:a}}function ae(e,t,n={}){const{throttle:o=0,trailing:i=!0,leading:r=!0,...c}=n;return te(e,t,{...c,eventFilter:k(o,i,r)})}const M=F?window:void 0,X=F?window.navigator:void 0;function Y(e){var t;const n=E(e);return(t=n==null?void 0:n.$el)!=null?t:n}function y(...e){let t,n,o,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,i]=e,t=M):[t,n,o,i]=e,!t)return O;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const r=[],c=()=>{r.forEach(s=>s()),r.length=0},a=(s,f,p,v)=>(s.addEventListener(f,p,v),()=>s.removeEventListener(f,p,v)),u=R(()=>[Y(t),E(i)],([s,f])=>{if(c(),!s)return;const p=K(f)?{...f}:f;r.push(...n.flatMap(v=>o.map(w=>a(s,v,w,p))))},{immediate:!0,flush:"post"}),l=()=>{u(),c()};return C(l),l}function oe(){const e=b(!1),t=I();return t&&G(()=>{e.value=!0},t),e}function j(e){const t=oe();return W(()=>(t.value,!!e()))}function re(e,t,n={}){const{window:o=M,...i}=n;let r;const c=j(()=>o&&"MutationObserver"in o),a=()=>{r&&(r.disconnect(),r=void 0)},u=W(()=>{const p=E(e),v=(Array.isArray(p)?p:[p]).map(Y).filter($);return new Set(v)}),l=R(()=>u.value,p=>{a(),c.value&&p.size&&(r=new MutationObserver(t),p.forEach(v=>r.observe(v,i)))},{immediate:!0,flush:"post"}),s=()=>r==null?void 0:r.takeRecords(),f=()=>{l(),a()};return C(f),{isSupported:c,stop:f,takeRecords:s}}function ce(e={}){var t;const{window:n=M,deep:o=!0,triggerOnRemoval:i=!1}=e,r=(t=e.document)!=null?t:n==null?void 0:n.document,c=()=>{var l;let s=r==null?void 0:r.activeElement;if(o)for(;s!=null&&s.shadowRoot;)s=(l=s==null?void 0:s.shadowRoot)==null?void 0:l.activeElement;return s},a=b(),u=()=>{a.value=c()};return n&&(y(n,"blur",l=>{l.relatedTarget===null&&u()},!0),y(n,"focus",u,!0)),i&&re(r,l=>{l.filter(s=>s.removedNodes.length).map(s=>Array.from(s.removedNodes)).flat().forEach(s=>{s===a.value&&u()})},{childList:!0,subtree:!0}),u(),a}function P(e,t={}){const{controls:n=!1,navigator:o=X}=t,i=j(()=>o&&"permissions"in o),r=D(),c=typeof e=="string"?{name:e}:e,a=D(),u=()=>{var s,f;a.value=(f=(s=r.value)==null?void 0:s.state)!=null?f:"prompt"};y(r,"change",u);const l=ee(async()=>{if(i.value){if(!r.value)try{r.value=await o.permissions.query(c)}catch{r.value=void 0}finally{u()}if(n)return U(r.value)}});return l(),n?{state:a,isSupported:i,query:l}:a}function fe(e={}){const{navigator:t=X,read:n=!1,source:o,copiedDuring:i=1500,legacy:r=!1}=e,c=j(()=>t&&"clipboard"in t),a=P("clipboard-read"),u=P("clipboard-write"),l=W(()=>c.value||r),s=b(""),f=b(!1),p=ne(()=>f.value=!1,i);function v(){c.value&&T(a.value)?t.clipboard.readText().then(m=>{s.value=m}):s.value=S()}l.value&&n&&y(["copy","cut"],v);async function w(m=E(o)){l.value&&m!=null&&(c.value&&T(u.value)?await t.clipboard.writeText(m):g(m),s.value=m,f.value=!0,p.start())}function g(m){const h=document.createElement("textarea");h.value=m??"",h.style.position="absolute",h.style.opacity="0",document.body.appendChild(h),h.select(),document.execCommand("copy"),h.remove()}function S(){var m,h,A;return(A=(h=(m=document==null?void 0:document.getSelection)==null?void 0:m.call(document))==null?void 0:h.toString())!=null?A:""}function T(m){return m==="granted"||m==="prompt"}return{isSupported:l,text:s,copied:f,copy:w}}const _=new Map;function de(e){const t=H();function n(a){var u;const l=_.get(e)||new Set;l.add(a),_.set(e,l);const s=()=>i(a);return(u=t==null?void 0:t.cleanups)==null||u.push(s),s}function o(a){function u(...l){i(u),a(...l)}return n(u)}function i(a){const u=_.get(e);u&&(u.delete(a),u.size||r())}function r(){_.delete(e)}function c(a,u){var l;(l=_.get(e))==null||l.forEach(s=>s(a,u))}return{on:n,once:o,off:i,emit:c,reset:r}}const se={page:e=>[e.pageX,e.pageY],client:e=>[e.clientX,e.clientY],screen:e=>[e.screenX,e.screenY],movement:e=>e instanceof Touch?null:[e.movementX,e.movementY]};function pe(e={}){const{type:t="page",touch:n=!0,resetOnTouchEnds:o=!1,initialValue:i={x:0,y:0},window:r=M,target:c=r,scroll:a=!0,eventFilter:u}=e;let l=null;const s=b(i.x),f=b(i.y),p=b(null),v=typeof t=="function"?t:se[t],w=d=>{const x=v(d);l=d,x&&([s.value,f.value]=x,p.value="mouse")},g=d=>{if(d.touches.length>0){const x=v(d.touches[0]);x&&([s.value,f.value]=x,p.value="touch")}},S=()=>{if(!l||!r)return;const d=v(l);l instanceof MouseEvent&&d&&(s.value=d[0]+r.scrollX,f.value=d[1]+r.scrollY)},T=()=>{s.value=i.x,f.value=i.y},m=u?d=>u(()=>w(d),{}):d=>w(d),h=u?d=>u(()=>g(d),{}):d=>g(d),A=u?()=>u(()=>S(),{}):()=>S();if(c){const d={passive:!0};y(c,["mousemove","dragover"],m,d),n&&t!=="movement"&&(y(c,["touchstart","touchmove"],h,d),o&&y(c,"touchend",T,d)),a&&t==="page"&&y(r,"scroll",A,{passive:!0})}return{x:s,y:f,sourceType:p}}export{Y as a,le as b,ue as c,M as d,de as e,ce as f,fe as g,pe as u,ae as w};
