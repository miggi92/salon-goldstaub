import{ax as D,ay as x,az as F,r as g,aA as B,$ as L,X as A,aB as q,J as P,o as z,at as G}from"./entry.ytBVPc5v.js";function $(t,e){let n,o,s;const r=g(!0),l=()=>{r.value=!0,s()};A(t,l,{flush:"sync"});const u=typeof e=="function"?e:e.get,i=typeof e=="function"?void 0:e.set,a=q((c,f)=>(o=c,s=f,{get(){return r.value&&(n=u(),r.value=!1),o(),n},set(v){i==null||i(v)}}));return Object.isExtensible(a)&&(a.trigger=l),a}function E(t){return x()?(F(t),!0):!1}function Y(t){let e=0,n,o;const s=()=>{e-=1,o&&e<=0&&(o.stop(),n=void 0,o=void 0)};return(...r)=>(e+=1,n||(o=D(!0),n=o.run(()=>t(...r))),E(s),n)}function y(t){return typeof t=="function"?t():L(t)}const C=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const I=Object.prototype.toString,J=t=>I.call(t)==="[object Object]",S=()=>{};function N(t,e){function n(...o){return new Promise((s,r)=>{Promise.resolve(t(()=>e.apply(this,o),{fn:e,thisArg:this,args:o})).then(s).catch(r)})}return n}function V(t,e={}){let n,o,s=S;const r=u=>{clearTimeout(u),s(),s=S};return u=>{const i=y(t),a=y(e.maxWait);return n&&r(n),i<=0||a!==void 0&&a<=0?(o&&(r(o),o=null),Promise.resolve(u())):new Promise((c,f)=>{s=e.rejectOnCancel?f:c,a&&!o&&(o=setTimeout(()=>{n&&r(n),o=null,c(u())},a)),n=setTimeout(()=>{o&&r(o),o=null,c(u())},i)})}}function X(t){let e;function n(){return e||(e=t()),e}return n.reset=async()=>{const o=e;e=void 0,o&&await o},n}function Z(t,e=200,n={}){return N(V(e,n),t)}function H(t,e,n={}){const{immediate:o=!0}=n,s=g(!1);let r=null;function l(){r&&(clearTimeout(r),r=null)}function u(){s.value=!1,l()}function i(...a){l(),s.value=!0,r=setTimeout(()=>{s.value=!1,r=null,t(...a)},y(e))}return o&&(s.value=!0,C&&i()),E(u),{isPending:B(s),start:i,stop:u}}function K(t){var e;const n=y(t);return(e=n==null?void 0:n.$el)!=null?e:n}const W=C?window:void 0,j=C?window.navigator:void 0;function w(...t){let e,n,o,s;if(typeof t[0]=="string"||Array.isArray(t[0])?([n,o,s]=t,e=W):[e,n,o,s]=t,!e)return S;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const r=[],l=()=>{r.forEach(c=>c()),r.length=0},u=(c,f,v,m)=>(c.addEventListener(f,v,m),()=>c.removeEventListener(f,v,m)),i=A(()=>[K(e),y(s)],([c,f])=>{if(l(),!c)return;const v=J(f)?{...f}:f;r.push(...n.flatMap(m=>o.map(h=>u(c,m,h,v))))},{immediate:!0,flush:"post"}),a=()=>{i(),l()};return E(a),a}function k(t={}){var e;const{window:n=W,deep:o=!0}=t,s=(e=t.document)!=null?e:n==null?void 0:n.document,r=()=>{var u;let i=s==null?void 0:s.activeElement;if(o)for(;i!=null&&i.shadowRoot;)i=(u=i==null?void 0:i.shadowRoot)==null?void 0:u.activeElement;return i},l=$(()=>null,()=>r());return n&&(w(n,"blur",u=>{u.relatedTarget===null&&l.trigger()},!0),w(n,"focus",l.trigger,!0)),l}function Q(){const t=g(!1),e=G();return e&&z(()=>{t.value=!0},e),t}function M(t){const e=Q();return P(()=>(e.value,!!t()))}function _(t,e={}){const{controls:n=!1,navigator:o=j}=e,s=M(()=>o&&"permissions"in o);let r;const l=typeof t=="string"?{name:t}:t,u=g(),i=()=>{r&&(u.value=r.state)},a=X(async()=>{if(s.value){if(!r)try{r=await o.permissions.query(l),w(r,"change",i),i()}catch{u.value="prompt"}return r}});return a(),n?{state:u,isSupported:s,query:a}:u}function ee(t={}){const{navigator:e=j,read:n=!1,source:o,copiedDuring:s=1500,legacy:r=!1}=t,l=M(()=>e&&"clipboard"in e),u=_("clipboard-read"),i=_("clipboard-write"),a=P(()=>l.value||r),c=g(""),f=g(!1),v=H(()=>f.value=!1,s);function m(){l.value&&u.value!=="denied"?e.clipboard.readText().then(d=>{c.value=d}):c.value=R()}a.value&&n&&w(["copy","cut"],m);async function h(d=y(o)){a.value&&d!=null&&(l.value&&i.value!=="denied"?await e.clipboard.writeText(d):O(d),c.value=d,f.value=!0,v.start())}function O(d){const p=document.createElement("textarea");p.value=d??"",p.style.position="absolute",p.style.opacity="0",document.body.appendChild(p),p.select(),document.execCommand("copy"),p.remove()}function R(){var d,p,T;return(T=(p=(d=document==null?void 0:document.getSelection)==null?void 0:d.call(document))==null?void 0:p.toString())!=null?T:""}return{isSupported:a,text:c,copied:f,copy:h}}const b=new Map;function te(t){const e=x();function n(u){var i;const a=b.get(t)||new Set;a.add(u),b.set(t,a);const c=()=>s(u);return(i=e==null?void 0:e.cleanups)==null||i.push(c),c}function o(u){function i(...a){s(i),u(...a)}return n(i)}function s(u){const i=b.get(t);i&&(i.delete(u),i.size||r())}function r(){b.delete(t)}function l(u,i){var a;(a=b.get(t))==null||a.forEach(c=>c(u,i))}return{on:n,once:o,off:s,emit:l,reset:r}}export{te as a,k as b,Y as c,ee as d,K as e,Z as u};
