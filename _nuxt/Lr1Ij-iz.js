import{aw as v,d as S,aJ as L,aK as P,aa as R,aL as _,G as z,aM as T,aN as C,aO as A,aP as D,aQ as I,J,aB as K}from"./CtxtWL-U.js";function G(e={}){const{inheritAttrs:s=!0}=e,u=v(),f=S({setup(a,{slots:i}){return()=>{u.value=i.default}}}),c=S({inheritAttrs:s,props:e.props,setup(a,{attrs:i,slots:o}){return()=>{var t;u.value;const n=(t=u.value)==null?void 0:t.call(u,{...e.props==null?V(i):a,$slots:o});return s&&(n==null?void 0:n.length)===1?n[0]:n}}});return L({define:f,reuse:c},[f,c])}function V(e){const s={};for(const u in e)s[P(u)]=e[u];return s}const W=_?window:void 0;function B(e){var s;const u=C(e);return(s=u==null?void 0:u.$el)!=null?s:u}function x(...e){const s=[],u=()=>{s.forEach(o=>o()),s.length=0},f=(o,t,n,r)=>(o.addEventListener(t,n,r),()=>o.removeEventListener(t,n,r)),c=z(()=>{const o=T(C(e[0])).filter(t=>t!=null);return o.every(t=>typeof t!="string")?o:void 0}),a=A(()=>{var o,t;return[(t=(o=c.value)==null?void 0:o.map(n=>B(n)))!=null?t:[W].filter(n=>n!=null),T(C(c.value?e[1]:e[0])),T(J(c.value?e[2]:e[1])),C(c.value?e[3]:e[2])]},([o,t,n,r])=>{if(u(),!(o!=null&&o.length)||!(t!=null&&t.length)||!(n!=null&&n.length))return;const m=I(r)?{...r}:r;s.push(...o.flatMap(p=>t.flatMap(d=>n.map(h=>f(p,d,h,m)))))},{flush:"post"}),i=()=>{a(),u()};return D(u),i}const O=new Map;function N(e){const s=K();function u(o){var t;const n=O.get(e)||new Set;n.add(o),O.set(e,n);const r=()=>c(o);return(t=s==null?void 0:s.cleanups)==null||t.push(r),r}function f(o){function t(...n){c(t),o(...n)}return u(t)}function c(o){const t=O.get(e);t&&(t.delete(o),t.size||a())}function a(){O.delete(e)}function i(o,t){var n;(n=O.get(e))==null||n.forEach(r=>r(o,t))}return{on:u,once:f,off:c,emit:i,reset:a}}const $={page:e=>[e.pageX,e.pageY],client:e=>[e.clientX,e.clientY],screen:e=>[e.screenX,e.screenY],movement:e=>e instanceof MouseEvent?[e.movementX,e.movementY]:null};function j(e={}){const{type:s="page",touch:u=!0,resetOnTouchEnds:f=!1,initialValue:c={x:0,y:0},window:a=W,target:i=a,scroll:o=!0,eventFilter:t}=e;let n=null,r=0,m=0;const p=v(c.x),d=v(c.y),h=v(null),g=typeof s=="function"?s:$[s],E=l=>{const M=g(l);n=l,M&&([p.value,d.value]=M,h.value="mouse"),a&&(r=a.scrollX,m=a.scrollY)},y=l=>{if(l.touches.length>0){const M=g(l.touches[0]);M&&([p.value,d.value]=M,h.value="touch")}},b=()=>{if(!n||!a)return;const l=g(n);n instanceof MouseEvent&&l&&(p.value=l[0]+a.scrollX-r,d.value=l[1]+a.scrollY-m)},H=()=>{p.value=c.x,d.value=c.y},w=t?l=>t(()=>E(l),{}):l=>E(l),X=t?l=>t(()=>y(l),{}):l=>y(l),Y=t?()=>t(()=>b(),{}):()=>b();if(i){const l={passive:!0};x(i,["mousemove","dragover"],w,l),u&&s!=="movement"&&(x(i,["touchstart","touchmove"],X,l),f&&x(i,"touchend",H,l)),o&&s==="page"&&x(a,"scroll",Y,l)}return{x:p,y:d,sourceType:h}}function Q(e,s={}){const{handleOutside:u=!0,window:f=W}=s,c=s.type||"page",{x:a,y:i,sourceType:o}=j(s),t=v(e??(f==null?void 0:f.document.body)),n=v(0),r=v(0),m=v(0),p=v(0),d=v(0),h=v(0),g=v(!0);let E=()=>{};return f&&(E=R([t,a,i],()=>{const y=B(t);if(!y||!(y instanceof Element))return;const{left:b,top:H,width:w,height:X}=y.getBoundingClientRect();m.value=b+(c==="page"?f.pageXOffset:0),p.value=H+(c==="page"?f.pageYOffset:0),d.value=X,h.value=w;const Y=a.value-m.value,l=i.value-p.value;g.value=w===0||X===0||Y<0||l<0||Y>w||l>X,(u||!g.value)&&(n.value=Y,r.value=l)},{immediate:!0}),x(document,"mouseleave",()=>g.value=!0,{passive:!0})),{x:a,y:i,sourceType:o,elementX:n,elementY:r,elementPositionX:m,elementPositionY:p,elementHeight:d,elementWidth:h,isOutside:g,stop:E}}export{Q as a,G as c,N as u};
